# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
version: 2.0

palette:
  black:        'black'
  blue:         'blue'
  error:        'p:red'
  green:        'green'
  purple:       '#5F5478'
  red:          'red'
  white:        'white'
  power-1:      '#CED9D6'
  power-2:      '#A3B7B3'
  power-3:      '#7B9891'
  power-4:      '#537871'
  power-5:      '#345952'
  power-6:      '#072E28'
  power-7:      '#001D18'
  ruby:         '#A51D24'
  js:           '#FCDC00'
  git-added:    'p:green'
  git-deleted:  'p:red'
  git-modified: 'yellow'
  git-working:  'p:blue'

final_space: true
shell_integration: true

blocks:
  - alignment: left
    type: prompt
    segments:
      - type: time
        style: diamond
        background: p:power-1
        foreground: p:black
        leading_diamond: 
        trailing_diamond: 
        properties:
          time_format: '15:04'
        template: '{{ .CurrentDate | date .Format }}'

      # - type: executiontime
      #   style: powerline
      #   foreground: p:white
      #   background: p:purple
      #   powerline_symbol: 
      #   properties:
      #     always_enabled: true
      #     style: austin
      #     threshold: 0
      #   template: '  {{ .FormattedMs }} '

      - type: path
        style: diamond
        background: p:power-3
        foreground: p:black
        leading_diamond: ' '
        properties:
          home_icon: ' ~'
          style: mixed
        template: '{{ .Path }}'

      - type: text
        style: plain
        foreground: p:power-3
        template: '{{ if .Segments.Git.HEAD }}{{ else }}{{ if .Segments.Path.Path }} {{ else }}{{ end }}{{ end }}'

      - type: git
        style: powerline
        background: p:power-4
        foreground: p:white
        powerline_symbol: 
        properties:
          branch_icon: ' '
          branch_max_length: 25
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: true
          github_icon: 
        templates:
          - ' {{ if .UpstreamIcon }}{{ .UpstreamIcon }}  {{ .HEAD }} {{ else }}{{ .HEAD }}{{ end }}'

      - type: text
        style: powerline
        background: p:power-2
        foreground: p:white
        powerline_symbol: 
        background_templates:
          - '{{ if .Segments.Git.Working }}p:purple{{ end }}'
        templates:
          - '{{ if .Segments.Git.Commit.Sha }}  {{ trunc 7 .Segments.Git.Commit.Sha }} {{ end }}'

      - type: text
        style: powerline
        background: p:git-modified
        foreground: p:black
        powerline_symbol: 
        templates:
          - '{{ if gt .Segments.Git.Working.Modified 0 }}  {{ .Segments.Git.Working.Modified }}{{ end }}'

      - type: text
        style: powerline
        background: p:git-added
        foreground: p:black
        powerline_symbol: 
        templates:
          - '{{ if gt .Segments.Git.Working.Added 0 }}  {{ .Segments.Git.Working.Added }}{{ end }}'

      - type: text
        style: powerline
        background: p:git-deleted
        foreground: p:white
        powerline_symbol: 
        templates:
          - '{{ if gt .Segments.Git.Working.Deleted 0 }}  {{ .Segments.Git.Working.Deleted }}{{ end }}'

      - type: text
        style: diamond
        background: p:git-working
        foreground: p:black
        trailing_diamond: ' '
        templates:
          - '{{ if gt .Segments.Git.Ahead 0 }} 󰜷{{ .Segments.Git.Ahead }}{{ end }}'
          - '{{ if gt .Segments.Git.Behind 0 }} 󰜮{{ .Segments.Git.Behind }}{{ end }}'
          - '{{ if gt .Segments.Git.StashCount 0 }}{{ Segments.Git.StashCount }}{{ end }}'

  - alignment: left
    type: prompt
    segments:
      - type: ruby
        style: diamond
        background: p:ruby
        foreground: p:white
        leading_diamond: ' '
        trailing_diamond: 
        template: '{{ if .Error }}{{ .Error }}{{ else }} {{ .Full }}{{ end }}'

      # - type: node
      #   style: powerline
      #   background: p:js
      #   foreground: p:white
      #   powerline_symbol: 
      #   template: '  '

  - alignment: left
    type: prompt
    newline: true
    segments:
      - type: session
        style: diamond
        background: p:green
        foreground: p:black
        leading_diamond: 
        trailing_diamond: ' '
        template: '{{ if .SSHSession }}{{ end }}'

      - type: text
        style: diamond
        background: p:black
        foreground: p:blue
        leading_diamond: 
        trailing_diamond: 
        properties:
          always_enabled: true
        background_templates:
          - '{{ if gt .Code 0 }}p:error{{ end }}'
        foreground_templates:
          - '{{ if gt .Code 0 }}p:white{{ end }}'
        template: 
